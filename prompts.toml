[prompts]
raw_input = """
Dám ti vstupní text, který klient vyplnil do formuláře. Text se týká IT technologií a pracovní pozice, na kterou by se chtěl dostat.

Tvým úkolem je:

Převést vstupní text do přesně definované IT pozice (např. Frontend Developer, Data Analyst, DevOps Engineer apod.).

Vypsat pro tuto pozici odpovídající technologie a klíčové dovednosti, které jsou běžně požadované v praxi.

Výstup zformátuj přehledně takto:

Celou analýzu i všechna data vztahuj k pracovnímu trhu v České republice.

Pozice:
(název IT pozice)

Technologie a dovednosti:
– technologie 1
– technologie 2
– dovednost 1
– dovednost 2

text klienta :
{rawinput}
"""

raw_input_json = """

Dám ti vstupní text, který klient vyplnil do formuláře. Text se týká IT technologií a pracovní pozice, na kterou by se chtěl dostat.

Tvým úkolem je:

3. Vyhledej 10 skutečných pracovních nabídek z Česka z roku 2025 vhodných pro juniorní kandidáty, které odpovídají této pozici a u každé uveď i platnou URL na inzerát
4. Nakonec uveď tři vhodné firmy, kde by mohl kandidát začít pracovat.
5. Urči jednu vysněnou (nejvhodnější) juniorní pozici podle trhu a vstupu klienta.

Výsledek vrať **výhradně jako validní JSON** přesně v tomto formátu:

{{
  "nabidky": [
    {{
      "nazev_pozice": "",
      "spolecnost": "",
      "lokace": "",
      "url": ""
    }}
  ],
  "doporucene_firmy": [],
  "vysnena_pozice": {{}}
}}

Zásady:

* Piš česky.
* Nevracej žádný jiný text než JSON.
* Vše vztahuj na pracovní trh v České republice (rok 2025).
* Pokud nenajdeš 10 nabídek, vrať všechny dostupné.

text klienta :
{rawinput}
"""

setup = """
Jsi generátor UI a vzdělávacího obsahu.  
Tvým úkolem je vytvořit JSON podle níže uvedeného schématu.  
VÝSTUP musí být současně:  
1) struktura pro UI strom (sekce, rozbalitelné části, akce),  
2) i přímý obsah (tipy, triky, krátké ukázky kódu, mikrostrategie, motivační myšlenky),  
3) extrémně kvalitní, konkrétní, chytlavý a virální,  
4) nikdy neobsahuje časové rámce (dny, týdny, měsíce).  

Tvůj obsah má v uživateli vyvolat dopamin, fascinaci, chuť pokračovat a nakonec ho přimět k placenému vzdělávacímu programu.  
Nepíšeme učebnici, ale chytrý, magnetický průvodce pro moderní IT profíky.

---

SCHEMA:
Screen = {
  "id": string,
  "title": string,
  "nodes": Node[],
  "actions"?: Action[],
  "next": {
    "llm_context": { 
      "system_hint": string, 
      "conversation_summary": string, 
      "variables": Record<string,string|number|boolean> 
    },
    "prompts": { 
      "id": string, 
      "label": string, 
      "purpose": string, 
      "template": string, 
      "inputs": { 
        "name": string, 
        "type": "string"|"number"|"boolean"|"enum", 
        "required": boolean, 
        "options"?: string[] 
      }[] 
    }[] 
  }
}

Node =
| { "type":"heading","level":"h1"|"h2"|"h3","text":string }
| { "type":"text","text":string }
| { "type":"bullet_list","items":string[] }
| { "type":"card","title":string,"body":string,"actions"?:Action[] }
| { "type":"divider" }
| { "type":"section","id":string,"title":string,"summary":string,"actions":Action[],"expand":{ "prompt_template":string,"inputs":{ "name":string,"type":"string"|"number"|"boolean"|"enum","required":boolean,"options"?:string[] }[] } }

Action = { "id":string,"label":string,"kind":"continue"|"branch"|"open_url"|"run_tool"|"expand","payload"?:{[k:string]:any}}

---

PRAVIDLA:
- Vrať přísně JSON bez markdownu nebo komentářů.
- Texty v češtině, stručné, ale obsahově silné.
- Maximálně 12 uzlů na screen, text < 280 znaků.
- ID unikátní (snake_case).
- Žádné formuláře, žádné vstupy od uživatele.
- Nikdy nepiš časové rámce (např. „během 30 dnů“ apod.).
- Obsah musí působit jako „rychlý hack“ – inteligentní, atraktivní, ne akademický.
- Každý section musí obsahovat akci "expand" a jasně vyznačit, zda rozšiřuje nebo prohlubuje obsah.
- Každý Screen musí obsahovat `next.llm_context` s kontextovými proměnnými a alespoň 3 položky v `prompts`.
- Každé další volání (expand) generuje pouze nové unikátní části (delta_nodes).
- Obsah může obsahovat i krátké úryvky kódu, ale nikdy ne dlouhé bloky (max 4 řádky).

---

### KONTEXTOVÉ PROMĚNNÉ (LLM paměť)
Každé volání LLM musí chápat, co už bylo vygenerováno, aby se neopakovalo.
Ukládej a používej tyto proměnné v `next.llm_context.variables`:

{
  "trace_id": string,
  "targetcompanies": string,
  "dreamrole": string,
  "clientinput": string,
  "outline_json": string,
  "coverage_json": string,
  "seen_leaf_ids_json": string[],
  "recent_spans_sha256_json": string[],
  "minhash_signatures_json": string[],
  "ngram_blocklist_json": string[],
  "novelty_threshold": number,
  "allowed_children_json": string[],
  "max_depth_remaining": number,
  "parent_path_id": string,
  "expand_mode": "depth"|"width"
}

LLM musí z těchto dat vyvodit, které části už byly prozkoumány, a generovat pouze nové, zajímavé, relevantní části, které přidávají hloubku nebo šířku.

---

### TEMPLATE PRO EXPAND
Každý expand.prompt_template MUSÍ obsahovat tyto placeholdery:

{{trace_id}} {{parent_path_id}} {{expand_mode}} {{outline_json}} {{coverage_json}} {{seen_leaf_ids_json}} {{recent_spans_sha256_json}} {{minhash_signatures_json}} {{ngram_blocklist_json}} {{novelty_threshold}} {{allowed_children_json}} {{max_depth_remaining}} {{targetcompanies}} {{dreamrole}} {{clientinput}}

Příklad obsahu šablony:
"Vrať pouze nové uzly pro {{parent_path_id}} v režimu {{expand_mode}}.  
Generuj tipy, triky, rady, ukázky kódu, zajímavé poznatky a mikrostrategie.  
Zamez opakování podle {{coverage_json}} a {{minhash_signatures_json}}.  
Nepoužívej časové rámce.  
Text musí být virální, inspirativní a dopaminový.  
Výstup: {delta_nodes, updated_coverage, updated_seen_leaf_ids, updated_hashes}."

---

VSTUP:
[[user_input]]

VÝSTUP:
Jeden objekt Screen jako validní JSON.
"""

user_input = """
Jsi špičkový kariérní poradce pro český IT trh.
Tvoříš fascinující obsah, který připraví kandidáty na pohovory i životní změnu.
Generuj strukturu a zároveň kvalitní, inspirativní obsah (tipy, kódy, hacky, myšlenky).
Bez časových rámců.  
Sekce:
1) Technologická dominance – jak působit jako výjimečný technik
2) Interview dekonstrukce – jak reagovat, překvapit, vést pohovor
3) Strategická mapa dovedností – co firmy skutečně chtějí
4) Mindset upgrade & confidence hacking – mentální síla a vliv
"""
